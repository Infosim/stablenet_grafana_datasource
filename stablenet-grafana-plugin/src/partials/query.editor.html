<!--
  ~ Copyright: Infosim GmbH & Co. KG Copyright (c) 2000-2019
  ~ Company: Infosim GmbH & Co. KG,
  ~                  LandsteinerstraÃŸe 4,
  ~                  97074 Wuerzburg, Germany
  ~                  www.infosim.net
  -->
<query-editor-row query-ctrl="ctrl" class="generic-datasource-query-row" has-text-edit-mode="false">
    <div class="gf-form-inline">
        <div class="gf-form">
            <label class="gf-form-label query-keyword width-9">
                Query Mode:
                <info-popover mode="right-normal">Allows switching between Device and Statistic Link mode.</info-popover>
            </label>
            <gf-form-dropdown model="ctrl.target.mode"
                              allow-custom="true"
                              lookup-text="true"
                              get-options="ctrl.getModes()"
                              class="width-13">
            </gf-form-dropdown>
        </div>
    </div>

    <div ng-if="ctrl.target.mode==='Device'">
        
        <div class="gf-form-inline">
            <div class="gf-form gf-form--grow">
                <label class="gf-form-label query-keyword width-9">
                    Device Query:
                    <info-popover mode="right-normal">The first dropdown menu below will only show devices containing the input of that field. Case insensitive.</info-popover>
                </label>
                <input class="gf-form-input" type="text" ng-model="ctrl.target.deviceQuery"
                       ng-blur="ctrl.onDeviceQueryChange()">
            </div>
        </div>

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-9">
                    Device:
                </label>
                <gf-form-dropdown model="ctrl.target.selectedDevice"
                                  allow-custom="true"
                                  lookup-text="true"
                                  get-options="ctrl.getDevices()"
                                  on-change="ctrl.onDeviceChange()"
                                  class="min-width-13">
                </gf-form-dropdown>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
         </div>   

         <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-9">
                    Measurement:
                </label>
                <gf-form-dropdown model="ctrl.target.measurement"
                                  allow-custom="true"
                                  lookup-text="true"
                                  get-options="ctrl.getMeasurements()"
                                  on-change="ctrl.onMeasurementChange()"
                                  class="min-width-13">
                </gf-form-dropdown>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-9">
                    Metric:
                    <info-popover mode="right-normal">Query metrics by selection, or manual via a substring or a regular expression. 
                        Regular expressions must be enclosed between slashes.</info-popover>
                </label>
                <gf-form-dropdown model="ctrl.target.metric"
                                  allow-custom="true"
                                  lookup-text="true"
                                  get-options="ctrl.getMetrics()"
                                  on-change="ctrl.onChangeInternal()"
                                  class="min-width-13">
                </gf-form-dropdown>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>

    </div>

    <div ng-if="ctrl.target.mode==='Statistic Link'">
        <div class="gf-form-inline">
            <div class="gf-form gf-form--grow">
                <label class="gf-form-label query-keyword width-9">
                    Link:
                </label>
                <input class="gf-form-input" type="text" ng-model="ctrl.target.statisticLink"
                    spellcheck="false" ng-blur="ctrl.onChangeInternal()">
            </div>
        </div>
    </div>

    <div class="gf-form-group">
		<div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">Include Min Statistics:</label>
                <gf-form-checkbox class="gf-form" checked="ctrl.target.includeMinStats" switch-class="max-width-6" 
                    on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
			<div class="gf-form">
                <label class="gf-form-label query-keyword width-11">Include Avg Statistics:</label>
                <gf-form-checkbox class="gf-form" checked="ctrl.target.includeAvgStats" switch-class="max-width-6" 
                    on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">Include Max Statistics:</label>
                <gf-form-checkbox class="gf-form" checked="ctrl.target.includeMaxStats" switch-class="max-width-6" 
                    on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
		</div>
	</div>
</query-editor-row>
  