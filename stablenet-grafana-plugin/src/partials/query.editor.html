<!--
  ~ Copyright: Infosim GmbH & Co. KG Copyright (c) 2000-2019
  ~ Company: Infosim GmbH & Co. KG,
  ~                  LandsteinerstraÃŸe 4,
  ~                  97074 Wuerzburg, Germany
  ~                  www.infosim.net
  -->
<query-editor-row query-ctrl="ctrl" class="generic-datasource-query-row" has-text-edit-mode="false">
    <div class="gf-form-inline">
        <div class="gf-form">
            <label class="gf-form-label query-keyword width-11">
                Query Mode:
                <info-popover mode="right-normal">Allows switching between Device and Statistic Link mode.
                </info-popover>
            </label>
            <gf-form-dropdown model="ctrl.target.mode"
                              allow-custom="true"
                              lookup-text="true"
                              get-options="ctrl.getModes()"
                              class="width-10">
            </gf-form-dropdown>
        </div>
    </div>

    <div ng-if="ctrl.target.mode==='Device'">

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">
                    Device Filter:
                    <info-popover mode="right-normal">The dropdown menu on the right will only show devices containing
                        the input of that field. Case insensitive.
                    </info-popover>
                </label>
                <input class="gf-form-input width-19" type="text" ng-model="ctrl.target.deviceQuery"
                       ng-blur="ctrl.onDeviceQueryChange()">
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">
                    Device:
                </label>
                <gf-form-dropdown model="ctrl.target.selectedDevice"
                                  allow-custom="true"
                                  lookup-text="true"
                                  get-options="ctrl.getDevices()"
                                  on-change="ctrl.onDeviceChange()"
                                  class="min-width-19">
                </gf-form-dropdown>
            </div>
            <div ng-if="ctrl.target.moreDevices" class="gf-form">
                <label class="gf-form-label width-2">
                    <info-popover mode="right-normal">There are more devices available, but only the first 100 are displayed. 
                        Use the Device Filter for higher accuracy.
                    </info-popover> 
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">
                    Measurement Filter:
                    <info-popover mode="right-normal">The dropdown menu on the right will only show measurements containing
                        the input of that field. Case insensitive.
                    </info-popover>
                </label>
                <input class="gf-form-input width-19" type="text" ng-model="ctrl.target.measurementQuery"
                       ng-blur="ctrl.onMeasurementRegexChange()">
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11">
                    Measurement:
                </label>
                <gf-form-dropdown model="ctrl.target.selectedMeasurement"
                                  allow-custom="true"
                                  lookup-text="true"
                                  get-options="ctrl.getMeasurements()"
                                  on-change="ctrl.onMeasurementChange()"
                                  class="width-19">
                </gf-form-dropdown>
            </div>
            <div ng-if="ctrl.target.moreMeasurements" class="gf-form">
                <label class="gf-form-label width-2">
                    <info-popover mode="right-normal">There are more measurements available, but only the first 100 are displayed. 
                        Use the Measurement Filter for higher accuracy.
                    </info-popover> 
                </label>
            </div>
            <div class="gf-form gf-form--grow">
                <div class="gf-form-label gf-form-label--grow"></div>
            </div>
        </div>

        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword width-11 sn-indented-label">
                    Metric Prefix:
                    <info-popover mode="right-normal">The input of this field will be added as a prefix to the metrics' names on the chart.
                    </info-popover>
                </label>
                <input class="gf-form-input width-19" type="text" ng-model="ctrl.target.metricPrefix"
                       ng-blur="ctrl.onChangeInternal()">
            </div>
        </div>
        
        <div class="gf-form" ng-if="!ctrl.target.metrics.length">
            <label class="gf-form-label query-keyword width-30 sn-indented-label" style="padding-left: 150px;">No metrics available!</label>
        </div>
        <label ng-if="ctrl.target.metrics.length" class="gf-form-label query-keyword width-11 sn-indented-label">Metrics:
            <info-popover mode="right-normal">Select the metrics you want to display.</info-popover>
        </label>
        <div class="gf-form-inline">
            <div class="gf-form" ng-repeat="metric in ctrl.target.metrics" style="margin-bottom: 0px!important">
                <label class="gf-form-label query-keyword sn-single-metric-label">{{ metric.text }}</label>
                <gf-form-checkbox class="gf-form" checked="ctrl.target.chosenMetrics[metric.value]" switch-class="width-3"
                                  on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
        </div>
    </div>

    <div ng-if="ctrl.target.mode==='Statistic Link'">
        <div class="gf-form-inline">
            <div class="gf-form gf-form--grow">
                <label class="gf-form-label query-keyword width-11">
                    Link:
                </label>
                <input class="gf-form-input" type="text" ng-model="ctrl.target.statisticLink"
                       spellcheck="false" ng-blur="ctrl.onChangeInternal()">
            </div>
        </div>
    </div>

    <div class="gf-form-group">
        <label class="gf-form-label query-keyword width-11 sn-indented-label">Include Statistics:
            <info-popover mode="right-normal">Select the statistics you want to display.
            </info-popover>
        </label>
        <div class="gf-form-inline">
            <div class="gf-form">
                <label class="gf-form-label query-keyword" style="width: 56px!important">Min</label>
                <gf-form-checkbox class="gf-form sn-checkbox-width" checked="ctrl.target.includeMinStats"
                                  on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword" style="width: 56px!important">Avg</label>
                <gf-form-checkbox class="gf-form sn-checkbox-width" checked="ctrl.target.includeAvgStats"
                                  on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
            <div class="gf-form">
                <label class="gf-form-label query-keyword" style="width: 56px!important">Max</label>
                <gf-form-checkbox class="gf-form sn-checkbox-width" checked="ctrl.target.includeMaxStats"
                                  on-change="ctrl.onChangeInternal()"></gf-form-checkbox>
            </div>
        </div>
    </div>
</query-editor-row>
  